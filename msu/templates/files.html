{% extends 'layout/base_admin.html' %}

{% block title %}
Files
{% endblock %}

{% block admin_content %}
  <div class="row container-fluid to-show">
    <div class="card col-5 card-format">
      <div class="card-header"><h2>Upload a document</h2></div>
        <div class="card-body col-sm-12">
        <form method="post">
          <input type="hidden" value="add" id="form_type" name="form_type">
          <div class="form-group">
            <label for="file" class="label">File</label>
            <input type="file" name="file" id="file" required>
          </div>

          <div class="form-group">
            <label for="name" class="label">Name</label>
            <input type="text" class="form-control" name="name" id="name" required>
          </div>

          <input type="submit" class="btn btn-raised btn-primary" value="Submit">
        </form>
      </div>
    </div>
    <div class="card col-7 card-format">
      <div class="card-header"><h2>Uploaded documents</h2></div>
        <div class="card-body col-sm-12">
          {% for row in myFiles %}
            <form method="post">
              <div class="form-group">
                <label for="time" class="label">Time</label>
                <input type="text" class="form-control" value="{{row.inserted_at}}" name="time" id="time" readonly>
              </div>

              <div class="form-group">
                <label for="title" class="label">Name</label>
                <input type="text" class="form-control" value="{{row.filename}}" name="filename" id="filename" readonly>
              </div>

              <div class="form-group">
                <label for="file" class="label">Download File</label>
                <a href="{{row.file_url}}" download="{{row.filename}}">Download</a>
              </div>
            </form>
          {% else %}
            <div>No files were found in the database.</div>
          {% endfor %}
      </div>
    </div>
  </div>
{% endblock %}
